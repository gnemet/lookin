# LookIn Configuration
# YAML-controlled interactive architecture drill-down viewer

title: "Project Ecosystem"
subtitle: "Click any node to drill deeper"
theme: handDrawn
languages: [en, hu]

# ── Sources: connected project repos ────────────────────────────
sources:
  jiramntr:
    label: "Jiramntr"
    label_hu: "Jiramntr"
    path: "../jiramntr"
    catalogs: "internal/catalog/*.json"
    diagrams: "docs/architecture/*.mmd"
    color: "#3498db"

  johanna:
    label: "Johanna"
    label_hu: "Johanna"
    path: "../johanna"
    diagrams: "docs/*.mmd"
    color: "#27ae60"

  datagrid:
    label: "Datagrid"
    label_hu: "Datagrid"
    path: "../datagrid"
    diagrams: "docs/*.mmd"
    color: "#e67e22"

# ── Layers: drill-down hierarchy ────────────────────────────────
layers:
  # Level 1: Business overview (for managers)
  - id: overview
    title: "Business Flow"
    title_hu: "Üzleti Folyamat"
    file: layers/overview.mmd
    nodes:
      JIRA:
        tooltip: "Jira project management"
      DWH:
        drilldown: architecture
        tooltip: "Data Warehouse"
      JOHANNA:
        drilldown: johanna
        tooltip: "AI Assistant"

  # Level 2: Technical architecture
  - id: architecture
    title: "System Architecture"
    title_hu: "Rendszerarchitektúra"
    file: layers/architecture.mmd
    source: jiramntr
    nodes:
      OLTP:
        drilldown: ingestion
      DWH:
        drilldown: star_schema
      MCP:
        drilldown: mcp_detail
      APP:
        drilldown: application
      AI:
        drilldown: ai_pipeline

  # Level 2b: Johanna architecture (PNG image mode)
  - id: johanna
    title: "Johanna AI Chat"
    title_hu: "Johanna AI Chat"
    render: image
    image: layers/johanna_arch.png
    source: johanna
    clickRegions:
      - label: "Web Layer"
        rect: [30, 13, 16, 16]
        drilldown: application
        tooltip: "HTMX + Templates, Chat UI, Sidebar"
      - label: "AI Chat Pipeline"
        rect: [49, 13, 19, 32]
        drilldown: ai_pipeline
        tooltip: "RAG → SQL → NL Pipeline"
      - label: "PostgreSQL Database"
        rect: [6, 35, 19, 30]
        doc: architecture.md
        tooltip: "PostgreSQL 16 — meta, dwh, issue schemas"
      - label: "Adapter Layer"
        rect: [49, 48, 19, 15]
        drilldown: rag_detail
        tooltip: "johannaAIClient, RAGProvider, SQLExecutor"
      - label: "Static Assets"
        rect: [30, 32, 16, 10]
        doc: application.md
        tooltip: "CSS (Catppuccin), JS (main.js)"
      - label: "AI Providers"
        rect: [30, 72, 16, 13]
        url: "https://ai.google.dev/"
        tooltip: "Gemini / Ollama / Mock"
      - label: "MCP Catalog"
        rect: [2, 4, 16, 22]
        drilldown: mcp_detail
        tooltip: "12 chain MCPs (.md)"
      - label: "aichat Package"
        rect: [72, 30, 17, 25]
        drilldown: ai_pipeline
        tooltip: "RunPipeline(), AIClient, RAGProvider"

  # Level 3: Star Schema detail
  - id: star_schema
    title: "Star Schema (DWH)"
    title_hu: "Csillagséma (DWH)"
    file: layers/star_schema.mmd
    source: jiramntr
    nodes:
      fact_daily_worklogs_h:
        catalog: fact_daily_worklogs_h.json
      fact_sla_events:
        catalog: fact_sla_events.json
      dim_issue_h:
        catalog: dim_issue_h.json
      dim_user_h:
        catalog: dim_user_h.json
      dim_calendar:
        catalog: dim_calendar.json
      dim_project_h:
        catalog: dim_project_h.json

  # Level 3: AI Pipeline
  - id: ai_pipeline
    title: "AI Self-Teaching Pipeline"
    title_hu: "AI Öntanulási Pipeline"
    file: layers/ai_pipeline.mmd
    source: jiramntr

  # Level 3: RAG detail
  - id: rag_detail
    title: "RAG Pipeline"
    title_hu: "RAG Pipeline"
    file: layers/rag_detail.mmd
    source: jiramntr

  # Level 3: Ingestion pipeline
  - id: ingestion
    title: "Data Ingestion"
    title_hu: "Adat Betöltés"
    file: layers/ingestion.mmd
    source: jiramntr

  # Level 3: MCP detail
  - id: mcp_detail
    title: "MCP Catalog Pipeline"
    title_hu: "MCP Katalógus Pipeline"
    file: layers/mcp_detail.mmd
    source: jiramntr

  # Level 3: Application
  - id: application
    title: "Application Stack"
    title_hu: "Alkalmazás"
    file: layers/application.mmd
    source: jiramntr
