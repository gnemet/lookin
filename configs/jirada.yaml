# LookIn Configuration
# YAML-controlled interactive architecture drill-down viewer
# PNG-first mode: all diagrams are pre-rendered PNGs with clickRegion overlays

title: "JiraDa"
subtitle: "Click any node to drill deeper"
theme: handDrawn
languages: [en, hu]

# â”€â”€ Sources: connected project repos â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
sources:
  jiramntr:
    label: "Jiramntr"
    label_hu: "Jiramntr"
    path: "../jiramntr"
    catalogs: "internal/catalog/*.json"
    diagrams: "docs/architecture/*.mmd"
    color: "#3498db"

  johanna:
    label: "Johanna"
    label_hu: "Johanna"
    path: "../johanna"
    diagrams: "docs/*.mmd"
    color: "#27ae60"

  aichat:
    label: "AI-Chat"
    label_hu: "AI-Chat"
    path: "../aichat"
    color: "#9b59b6"

  mcp-forge:
    label: "MCP-Forge"
    label_hu: "MCP-Forge"
    path: "../mcp-forge"
    color: "#e74c3c"

  datagrid:
    label: "Datagrid"
    label_hu: "Datagrid"
    path: "../datagrid"
    diagrams: "docs/*.mmd"
    color: "#e67e22"

  lookin:
    label: "LookIn"
    label_hu: "LookIn"
    path: "."
    color: "#1abc9c"

# â”€â”€ Layers: drill-down hierarchy â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# All layers use PNG images with clickRegions for drill-down.
# clickRegions rect format: [x%, y%, width%, height%] relative to image
layers:

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 0: Enterprise ecosystem
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: enterprise
    title: "JiraDa"
    title_hu: "JiraDa"
    file: layers/jira-monitor/enterprise.mmd
    doc: jira-monitor/enterprise.md
    clickRegions:
      - label: "Jiramntr"
        rect: [5, 14, 20, 14]
        drilldown: overview
        tooltip: "Jiramntr â€” DWH, BI, KPI, ETL (:8080)"
      - label: "Johanna"
        rect: [28, 14, 20, 14]
        drilldown: johanna
        tooltip: "Johanna â€” AI Chat (:8082)"
      - label: "aichat"
        rect: [5, 40, 20, 12]
        drilldown: aichat_module
        tooltip: "Shared NLâ†’SQL Pipeline (Go module)"
      - label: "datagrid"
        rect: [5, 55, 20, 12]
        drilldown: application
        tooltip: "Datagrid â€” Table Renderer (Go module)"
      - label: "MCP-Forge"
        rect: [62, 10, 25, 14]
        drilldown: mcp_forge
        tooltip: "MCP-Forge â€” RAG Builder (Python CLI)"
      - label: "LookIn"
        rect: [62, 26, 25, 14]
        tooltip: "LookIn â€” Architecture Viewer (HTML/JS)"
      - label: "sys-gpu01"
        rect: [33, 38, 22, 10]
        doc: jira-monitor/deployment.md
        tooltip: "Ollama LLM â€” sys-gpu01"
      - label: "Gemini API"
        rect: [33, 50, 22, 8]
        tooltip: "Google Gemini API"
      - label: "LDAP"
        rect: [33, 60, 22, 8]
        tooltip: "Active Directory LDAP"
      - label: "Oracle FDW"
        rect: [33, 70, 22, 8]
        drilldown: ingestion
        tooltip: "Oracle Foreign Data Wrapper"
      - label: "jiramntr_db"
        rect: [65, 42, 25, 14]
        drilldown: architecture
        tooltip: "jiramntr_db â€” DWH + Meta + OLTP"
      - label: "ragdb"
        rect: [65, 58, 25, 14]
        drilldown: ragdb_schema
        tooltip: "ragdb â€” Embeddings + Knowledge"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 1: Business overview
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: overview
    title: "Business Flow"
    title_hu: "Ãœzleti Folyamat"
    file: layers/jiramntr/overview.mmd
    source: jiramntr
    clickRegions:
      - label: "Jira"
        rect: [3, 16, 15, 12]
        tooltip: "Jira â€” Issues, Worklogs"
      - label: "Active Directory"
        rect: [3, 38, 15, 14]
        tooltip: "Active Directory â€” Users, Teams"
      - label: "Leave System"
        rect: [3, 58, 15, 12]
        tooltip: "TER â€” Leave System"
      - label: "Data Warehouse"
        rect: [24, 33, 20, 22]
        drilldown: architecture
        tooltip: "Data Warehouse â€” Consolidated Data"
      - label: "MCP-Forge"
        rect: [30, 14, 16, 10]
        drilldown: mcp_forge
        tooltip: "MCP-Forge â€” Knowledge Builder"
      - label: "ragdb"
        rect: [50, 14, 14, 10]
        drilldown: ragdb_schema
        tooltip: "ragdb â€” AI Knowledge"
      - label: "Johanna"
        rect: [68, 14, 16, 10]
        drilldown: johanna
        tooltip: "Johanna â€” AI Assistant"
      - label: "KPI Dashboard"
        rect: [53, 38, 17, 14]
        tooltip: "KPI Dashboard"
      - label: "BI Reports"
        rect: [53, 60, 17, 14]
        tooltip: "BI Reports"
      - label: "Users"
        rect: [78, 35, 14, 20]
        tooltip: "End Users"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 2: Technical architecture
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: architecture
    title: "System Architecture"
    title_hu: "RendszerarchitektÃºra"
    file: layers/jiramntr/architecture.mmd
    source: jiramntr
    clickRegions:
      - label: "Oracle Jira"
        rect: [1, 14, 10, 12]
        tooltip: "Oracle Jira (source)"
      - label: "LDAP"
        rect: [1, 38, 10, 10]
        tooltip: "LDAP (source)"
      - label: "TER API"
        rect: [1, 60, 10, 10]
        tooltip: "TER REST API (source)"
      - label: "oracle_fdw"
        rect: [13, 14, 12, 10]
        drilldown: ingestion
        tooltip: "Foreign Data Wrapper"
      - label: "oltp â€” 20 tables"
        rect: [28, 14, 16, 14]
        drilldown: ingestion
        tooltip: "OLTP â€” 20 raw tables"
      - label: "dwh â€” Star Schema"
        rect: [28, 32, 16, 16]
        drilldown: star_schema
        tooltip: "â­ DWH Star Schema"
      - label: "ragdb pgvector"
        rect: [28, 54, 16, 12]
        drilldown: ragdb_schema
        tooltip: "ragdb â€” pgvector embeddings"
      - label: "30 JSON catalogs"
        rect: [48, 10, 14, 10]
        drilldown: mcp_detail
        tooltip: "MCP Pipeline â€” JSON Catalogs"
      - label: "12 chain MCPs"
        rect: [48, 22, 14, 10]
        drilldown: mcp_detail
        tooltip: "MCP Pipeline â€” Chain MCPs"
      - label: "MCP-Forge"
        rect: [48, 34, 14, 10]
        drilldown: mcp_forge
        tooltip: "MCP-Forge tool"
      - label: "REST API"
        rect: [70, 10, 16, 8]
        drilldown: application
        tooltip: "Jiramntr REST API"
      - label: "AI SQL Lab"
        rect: [70, 20, 16, 8]
        drilldown: ai_pipeline
        tooltip: "AI SQL Lab"
      - label: "BI Queries"
        rect: [70, 30, 16, 8]
        tooltip: "BI Query Library"
      - label: "KPI Dashboard"
        rect: [70, 40, 16, 8]
        tooltip: "KPI Dashboard"
      - label: "ETL Orchestrator"
        rect: [70, 50, 16, 8]
        drilldown: ingestion
        tooltip: "ETL Orchestrator"
      - label: "aichat module"
        rect: [65, 70, 18, 8]
        drilldown: aichat_module
        tooltip: "âš¡ aichat shared module"
      - label: "Gemini"
        rect: [65, 80, 18, 6]
        tooltip: "Gemini LLM"
      - label: "Ollama"
        rect: [65, 88, 18, 6]
        tooltip: "Ollama LLM"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 2b: Johanna (uses existing johanna_arch.png)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: johanna
    title: "Johanna AI Chat"
    title_hu: "Johanna AI Chat"
    render: image
    image: layers/johanna/johanna_arch.png
    source: johanna
    clickRegions:
      - label: "Web Layer"
        rect: [30, 13, 16, 16]
        drilldown: application
        tooltip: "HTMX + Templates, Chat UI, Sidebar"
      - label: "AI Chat Pipeline"
        rect: [49, 13, 19, 32]
        drilldown: ai_pipeline
        tooltip: "RAG â†’ SQL â†’ NL Pipeline"
      - label: "PostgreSQL Database"
        rect: [6, 35, 19, 30]
        doc: jiramntr/architecture.md
        tooltip: "PostgreSQL 17 â€” meta, dwh, issue schemas"
      - label: "Adapter Layer"
        rect: [49, 48, 19, 15]
        drilldown: aichat_module
        tooltip: "johannaAIClient, RAGProvider, SQLExecutor"
      - label: "Static Assets"
        rect: [30, 32, 16, 10]
        doc: jiramntr/application.md
        tooltip: "CSS (Catppuccin), JS (main.js)"
      - label: "AI Providers"
        rect: [30, 72, 16, 13]
        url: "https://ai.google.dev/"
        tooltip: "Gemini / Ollama / Mock"
      - label: "MCP Catalog"
        rect: [2, 4, 16, 22]
        drilldown: mcp_forge
        tooltip: "MCP-Forge generated chains"
      - label: "aichat Package"
        rect: [72, 30, 17, 25]
        drilldown: aichat_module
        tooltip: "RunPipeline(), AIClient, RAGProvider"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 2c: AI-Chat module
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: aichat_module
    title: "AI-Chat Module"
    title_hu: "AI-Chat Modul"
    file: layers/aichat/aichat_module.mmd
    source: aichat
    doc: aichat/aichat_module.md
    clickRegions:
      - label: "AIClient"
        rect: [3, 18, 18, 10]
        tooltip: "AIClient interface"
      - label: "RAGProvider"
        rect: [3, 33, 18, 10]
        tooltip: "RAGProvider interface"
      - label: "SQLExecutor"
        rect: [3, 48, 18, 10]
        tooltip: "SQLExecutor interface"
      - label: "Stage 1: NL â†’ SQL"
        rect: [28, 18, 22, 10]
        tooltip: "Natural Language â†’ SQL generation"
      - label: "Stage 2: SQL â†’ Execute"
        rect: [28, 32, 22, 10]
        tooltip: "SQL Execution with error handling"
      - label: "Stage 3: Results â†’ NL"
        rect: [28, 46, 22, 10]
        tooltip: "Results â†’ Natural Language synthesis"
      - label: "Auto-Repair"
        rect: [28, 58, 22, 10]
        tooltip: "ğŸ”§ Auto-Repair SQL Fix Loop"
      - label: "Persona Loader"
        rect: [28, 74, 22, 6]
        doc: aichat/aichat_module.md
        tooltip: "ğŸ“ Persona Loader (embed.FS)"
      - label: "Feedback"
        rect: [28, 81, 22, 6]
        tooltip: "ğŸ“Š Feedback (YAML + JSONL)"
      - label: "Audit Log"
        rect: [28, 88, 22, 6]
        drilldown: ragdb_schema
        tooltip: "ğŸ“‹ Audit Log (rag.audit_log)"
      - label: "Jiramntr Adapters"
        rect: [62, 18, 25, 18]
        drilldown: architecture
        tooltip: "jiramntrAIClient, RAGProvider, SQLExecutor"
      - label: "Johanna Adapters"
        rect: [62, 40, 25, 18]
        drilldown: johanna
        tooltip: "johannaAIClient, RAGProvider, SQLExecutor"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 2d: MCP-Forge pipeline
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: mcp_forge
    title: "MCP-Forge Pipeline"
    title_hu: "MCP-Forge Pipeline"
    file: layers/mcp-forge/mcp_forge.mmd
    source: mcp-forge
    doc: mcp-forge/mcp_forge.md
    clickRegions:
      - label: "Config (jiramntr.yaml)"
        rect: [1, 12, 12, 80]
        tooltip: "ğŸ“„ jiramntr.yaml â€” Project Config"
      - label: "postgres_dwh"
        rect: [16, 8, 17, 10]
        drilldown: star_schema
        tooltip: "ğŸ˜ postgres_dwh â€” JSON Catalogs"
      - label: "confluence"
        rect: [16, 20, 17, 8]
        tooltip: "ğŸ“š Confluence source"
      - label: "documents"
        rect: [16, 30, 17, 8]
        tooltip: "ğŸ“ Document source"
      - label: "git_source"
        rect: [16, 40, 17, 8]
        tooltip: "ğŸ”€ Git source"
      - label: "jira_comments"
        rect: [16, 50, 17, 8]
        tooltip: "ğŸŸ  Jira comments"
      - label: "pptx_source"
        rect: [16, 60, 17, 8]
        tooltip: "ğŸ“Š PowerPoint source"
      - label: "bash_scripts"
        rect: [16, 70, 17, 8]
        tooltip: "ğŸ–¥ï¸ Bash scripts"
      - label: "Chunker"
        rect: [37, 12, 14, 20]
        tooltip: "âœ‚ï¸ Chunker â€” MANUAL markers"
      - label: "Templates"
        rect: [37, 38, 14, 20]
        tooltip: "ğŸ“‹ Templates â€” Jinja2"
      - label: "Backup"
        rect: [37, 64, 14, 20]
        tooltip: "ğŸ’¾ Backup â€” tar.gz archive"
      - label: "--full (Monolithic)"
        rect: [55, 8, 18, 15]
        tooltip: "ğŸ“„ Monolithic MCP output"
      - label: "--chain-gemini"
        rect: [55, 28, 18, 15]
        tooltip: "ğŸ”— Topic Split for Gemini"
      - label: "--chain-ollama"
        rect: [55, 48, 18, 15]
        tooltip: "ğŸ”— Chunked â‰¤5KB for Ollama"
      - label: "--json"
        rect: [55, 68, 18, 15]
        tooltip: "ğŸ“Š JSON Export"
      - label: "ragdb"
        rect: [78, 10, 18, 30]
        drilldown: ragdb_schema
        tooltip: "ğŸ§  ragdb â€” rag.knowledge target"
      - label: "chain files"
        rect: [78, 50, 18, 30]
        tooltip: "ğŸ“ chain_gemini/ chain_ollama/ files"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 2e: Deployment
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: deployment
    title: "Deployment Infrastructure"
    title_hu: "TelepÃ­tÃ©si InfrastruktÃºra"
    file: layers/jira-monitor/deployment.mmd
    doc: jira-monitor/deployment.md
    clickRegions:
      - label: "Developer Workstation"
        rect: [1, 8, 17, 60]
        tooltip: "ğŸ’» ~/projects/ â€” 6 Git repos, go build, tar.gz"
      - label: "scp / sshpass"
        rect: [22, 30, 14, 14]
        tooltip: "ğŸ“¡ SSH key transfer"
      - label: "jiramntr-server"
        rect: [40, 8, 22, 12]
        drilldown: architecture
        tooltip: "ğŸ“Š jiramntr-server :8080"
      - label: "johanna"
        rect: [40, 42, 22, 12]
        drilldown: johanna
        tooltip: "ğŸ¤– johanna :8082"
      - label: "PostgreSQL 17"
        rect: [40, 62, 22, 18]
        drilldown: star_schema
        tooltip: "ğŸ—„ï¸ PostgreSQL 17"
      - label: "sys-gpu01"
        rect: [72, 10, 18, 16]
        tooltip: "ğŸ–¥ï¸ sys-gpu01 â€” Ollama :11434"
      - label: "ldap.alig.hu"
        rect: [72, 34, 18, 12]
        tooltip: "ğŸ” ldap.alig.hu :389"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: Star Schema
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: star_schema
    title: "Star Schema (DWH)"
    title_hu: "CsillagsÃ©ma (DWH)"
    file: layers/jiramntr/star_schema.mmd
    source: jiramntr
    clickRegions:
      - label: "fact_daily_worklogs_h"
        rect: [28, 20, 24, 7]
        catalog: jiramntr/fact_daily_worklogs_h.json
        tooltip: "Time tracking fact table"
      - label: "fact_sla_events"
        rect: [28, 29, 24, 7]
        catalog: jiramntr/fact_sla_events.json
        tooltip: "SLA breaches fact table"
      - label: "fact_status_events_h"
        rect: [28, 38, 24, 7]
        tooltip: "Status changes fact table"
      - label: "fact_issue_daily_snapshot"
        rect: [28, 47, 24, 7]
        tooltip: "Daily issue state snapshot"
      - label: "fact_project_daily_effort"
        rect: [28, 56, 24, 7]
        tooltip: "Project hours fact table"
      - label: "fact_user_daily_kpi"
        rect: [28, 65, 24, 7]
        tooltip: "User KPI fact table"
      - label: "dim_issue_h"
        rect: [5, 8, 16, 10]
        catalog: jiramntr/dim_issue_h.json
        tooltip: "Issues dimension (ltree hierarchy)"
      - label: "dim_user_h"
        rect: [55, 8, 16, 10]
        catalog: jiramntr/dim_user_h.json
        tooltip: "Users dimension (hierarchy)"
      - label: "dim_calendar"
        rect: [75, 30, 16, 10]
        catalog: jiramntr/dim_calendar.json
        tooltip: "Calendar dimension"
      - label: "dim_project_h"
        rect: [75, 60, 16, 10]
        catalog: jiramntr/dim_project_h.json
        tooltip: "Projects dimension"
      - label: "dim_status_h"
        rect: [5, 60, 16, 10]
        tooltip: "Statuses dimension"
      - label: "dim_priority_h"
        rect: [5, 78, 16, 10]
        tooltip: "Priorities dimension"
      - label: "user_get_* (24 fn)"
        rect: [22, 82, 18, 8]
        tooltip: "24 user access functions"
      - label: "issue_get_* (10 fn)"
        rect: [44, 82, 18, 8]
        tooltip: "10 issue access functions"
      - label: "4 analytics fn"
        rect: [66, 82, 18, 8]
        tooltip: "4 analytics functions"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: ragdb schema
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: ragdb_schema
    title: "RAG Database (ragdb)"
    title_hu: "RAG AdatbÃ¡zis (ragdb)"
    file: layers/jiramntr/ragdb_schema.mmd
    doc: jiramntr/ragdb.md
    clickRegions:
      - label: "rag.knowledge"
        rect: [3, 12, 30, 18]
        doc: jiramntr/ragdb.md#tables
        tooltip: "Knowledge store â€” topic + content + source"
      - label: "rag.embeddings"
        rect: [35, 12, 32, 18]
        doc: jiramntr/ragdb.md#embeddings
        tooltip: "Unified embeddings (gemini + ollama)"
      - label: "Partitions"
        rect: [35, 32, 32, 12]
        tooltip: "embeddings_dwh, _hr, _meta, _confluence, _docs"
      - label: "rag.issue_embeddings"
        rect: [3, 50, 28, 14]
        tooltip: "Issue vectors â€” issue_key + embedding"
      - label: "rag.audit_log"
        rect: [3, 68, 28, 14]
        doc: jiramntr/ragdb.md#tables
        tooltip: "AI query audit trail"
      - label: "Functions"
        rect: [38, 50, 32, 38]
        tooltip: "6 RAG functions (search, upsert, cleanup)"
      - label: "Gemini Provider"
        rect: [75, 10, 20, 15]
        tooltip: "âœ¨ Gemini text-embedding-004"
      - label: "Ollama Provider"
        rect: [75, 28, 20, 15]
        tooltip: "ğŸ¦™ Ollama nomic-embed-text"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: AI Pipeline
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: ai_pipeline
    title: "AI Self-Teaching Pipeline"
    title_hu: "AI Ã–ntanulÃ¡si Pipeline"
    file: layers/jiramntr/ai_pipeline.mmd
    source: jiramntr
    clickRegions:
      - label: "Teacher (Gemini)"
        rect: [5, 10, 35, 25]
        tooltip: "ğŸ§™ Phase 1 â€” Teacher generates Gold Standard SQL"
      - label: "Student (Ollama)"
        rect: [50, 10, 35, 25]
        tooltip: "ğŸ¤– Phase 2 â€” Student is tested on 131 questions"
      - label: "Compare & Score"
        rect: [20, 40, 30, 10]
        tooltip: "ğŸ“ Phase 3 â€” Grading & comparison"
      - label: "Correction Blueprints"
        rect: [20, 55, 30, 8]
        tooltip: "Failed â†’ Correction Blueprints"
      - label: "training.jsonl"
        rect: [20, 65, 30, 8]
        tooltip: "training.jsonl for fine-tuning"
      - label: "Feedback Loop"
        rect: [5, 80, 55, 12]
        tooltip: "sqlerr.yaml, warning.yaml, Manual ğŸ‘/ğŸ‘"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: RAG detail
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: rag_detail
    title: "RAG Pipeline"
    title_hu: "RAG Pipeline"
    file: layers/jiramntr/rag_detail.mmd
    source: jiramntr
    clickRegions:
      - label: "generate_catalog.py"
        rect: [2, 60, 13, 12]
        tooltip: "Catalog generator script"
      - label: "30 JSON catalogs"
        rect: [16, 60, 14, 12]
        drilldown: star_schema
        tooltip: "30 JSON table catalogs"
      - label: "12 chain MCPs"
        rect: [8, 18, 18, 14]
        drilldown: mcp_detail
        tooltip: "12 domain-specific chain MCPs"
      - label: "dwh_mcp.md"
        rect: [2, 78, 16, 10]
        tooltip: "Monolithic MCP (full file)"
      - label: "Gemini Embedding API"
        rect: [34, 12, 22, 18]
        tooltip: "ğŸ§² Gemini Embedding API"
      - label: "meta.mcp_embeddings"
        rect: [34, 38, 22, 18]
        drilldown: ragdb_schema
        tooltip: "pgvector (HNSW) embeddings"
      - label: "User Question"
        rect: [65, 12, 18, 12]
        tooltip: "User's natural language question"
      - label: "Vector Search"
        rect: [65, 38, 18, 16]
        tooltip: "Vector Search â€” Top-K chunks"
      - label: "Direct MCP"
        rect: [65, 58, 18, 12]
        tooltip: "Direct MCP (full file fallback)"
      - label: "MCP Context"
        rect: [65, 78, 18, 12]
        tooltip: "Assembled MCP context for LLM"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: Ingestion
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: ingestion
    title: "Data Ingestion"
    title_hu: "Adat BetÃ¶ltÃ©s"
    file: layers/jiramntr/ingestion.mmd
    source: jiramntr
    clickRegions:
      - label: "Oracle DB"
        rect: [2, 8, 18, 16]
        tooltip: "ğŸŸ  Oracle DB â€” jiraissue, worklog, issuelink, customfield"
      - label: "Active Directory"
        rect: [2, 28, 18, 12]
        tooltip: "ğŸ”µ Active Directory â€” LDAP Sync"
      - label: "TER REST"
        rect: [2, 44, 18, 10]
        tooltip: "ğŸŸ¢ TER REST â€” Leave System"
      - label: "Git"
        rect: [2, 56, 18, 10]
        tooltip: "ğŸ”€ Git â€” Source Repositories"
      - label: "JobControl (JC)"
        rect: [2, 68, 18, 10]
        tooltip: "ğŸ›ï¸ JobControl â€” Job Scheduling"
      - label: "SharePoint"
        rect: [2, 80, 18, 10]
        tooltip: "ğŸ“ SharePoint â€” Documents & Lists"
      - label: "oracle_fdw"
        rect: [28, 8, 16, 16]
        tooltip: "ğŸ”Œ oracle_fdw â€” Foreign Data Wrapper"
      - label: "ext.ldap_import"
        rect: [28, 30, 18, 20]
        tooltip: "ğŸ“¥ ext.ldap_import / ext.ter_data"
      - label: "ETL Orchestrator"
        rect: [52, 30, 16, 20]
        tooltip: "âš™ï¸ ETL Orchestrator â€” Yearly partitioned"
      - label: "Star Schema"
        rect: [74, 20, 20, 30]
        drilldown: star_schema
        tooltip: "ğŸ“Š Star Schema â€” Facts + Dimensions"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: MCP detail
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: mcp_detail
    title: "MCP Catalog Pipeline"
    title_hu: "MCP KatalÃ³gus Pipeline"
    file: layers/jiramntr/mcp_detail.mmd
    source: jiramntr
    clickRegions:
      - label: "JSON Catalogs"
        rect: [15, 6, 50, 10]
        tooltip: "ğŸ“‹ 50 tables Ã— 250+ columns"
      - label: "MCP Template"
        rect: [15, 18, 50, 10]
        tooltip: "ğŸ“ dwh_mcp_template.md"
      - label: "MCP Generator"
        rect: [15, 30, 50, 10]
        drilldown: mcp_forge
        tooltip: "âš™ï¸ Auto-generates from DB schema"
      - label: "Chain MCPs"
        rect: [15, 42, 50, 10]
        tooltip: "ğŸ”— 12 domain-specific .md files"
      - label: "Gemini Embedding"
        rect: [15, 54, 50, 10]
        tooltip: "ğŸ§  text-embedding-004"
      - label: "meta.mcp_embeddings"
        rect: [15, 66, 50, 10]
        drilldown: ragdb_schema
        tooltip: "ğŸ“¦ Vector store (pgvector)"
      - label: "RAG Search"
        rect: [15, 78, 50, 10]
        tooltip: "ğŸ” Similarity search"
      - label: "AI SQL Lab"
        rect: [15, 88, 50, 10]
        drilldown: aichat_module
        tooltip: "ğŸ¤– NL â†’ MCP â†’ SQL"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: Application
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: application
    title: "Application Stack"
    title_hu: "AlkalmazÃ¡s"
    file: layers/jiramntr/application.mmd
    source: jiramntr
    clickRegions:
      - label: "Go Backend"
        rect: [25, 6, 30, 14]
        tooltip: "ğŸ–¥ï¸ Go Backend â€” port 8080"
      - label: "REST API"
        rect: [15, 28, 28, 14]
        tooltip: "ğŸ“¡ /api/chat, /api/bi, /api/kpi, /api/employee"
      - label: "RLS Middleware"
        rect: [55, 28, 22, 14]
        drilldown: security
        tooltip: "ğŸ”’ Row-Level Security"
      - label: "Web UI"
        rect: [3, 55, 25, 18]
        tooltip: "ğŸ¨ HTMX + Vanilla CSS, Premium dark theme"
      - label: "KPI Dashboard"
        rect: [33, 55, 22, 12]
        tooltip: "ğŸ“ˆ YAML-driven KPI Dashboard"
      - label: "BI Query Library"
        rect: [60, 55, 24, 12]
        tooltip: "ğŸ“Š Markdown-based BI Queries"
      - label: "Datagrid Library"
        rect: [3, 78, 25, 15]
        tooltip: "ğŸ“Š Datagrid v1.2 â€” LOV params"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Level 3: Security
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: security
    title: "Security Architecture"
    title_hu: "BiztonsÃ¡gi ArchitektÃºra"
    file: layers/jiramntr/security.mmd
    source: jiramntr
    doc: jiramntr/security.md
    clickRegions:
      - label: "AuthMiddleware"
        rect: [12, 8, 18, 10]
        doc: jiramntr/security.md#authentication
        tooltip: "Cookie: auth_user"
      - label: "ACLMiddleware"
        rect: [32, 8, 18, 10]
        doc: jiramntr/security.md#folder-acl
        tooltip: "Route-level permissions"
      - label: "Folder ACL"
        rect: [52, 8, 15, 10]
        doc: jiramntr/security.md#folder-acl
        tooltip: "whitelist / blacklist / hierarchy"
      - label: "Folder ACL YAML"
        rect: [5, 22, 55, 16]
        doc: jiramntr/security.md#folder-acl
        tooltip: "whitelist + blacklist + hierarchy via ltree"
      - label: "RLS Token System"
        rect: [5, 44, 55, 18]
        doc: jiramntr/security.md#rls-tokens
        tooltip: "rls_scope â†’ SHA256 â†’ Token (1yr expiry)"
      - label: "Auto-Rehash"
        rect: [65, 44, 25, 16]
        doc: jiramntr/security.md#rls-tokens
        tooltip: "Auto-Rehash on Startup â€” RehashRLSTokens()"
      - label: "Token Validation"
        rect: [5, 68, 85, 25]
        doc: jiramntr/security.md#rls-tokens
        tooltip: "valid âœ…, no_token âŒ, hash_mismatch âŒ, expired âŒ"
